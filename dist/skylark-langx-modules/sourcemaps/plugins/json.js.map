{"version":3,"sources":["plugins/json.js"],"names":["define","modules","modular","map","Object","create","plugins","json","load","name","req","onLoad","config","text","get","toUrl","isBuild","_json","JSON","parse","e","error","accept","write","pluginName","moduleName"],"mappings":";;;;;;;AAAAA,QACA,aACA,UACG,SAASC,EAAQC,GAChB,aAEH,IAAIC,EAAMC,OAAOC,OAAO,MAExB,OAAOH,EAAQI,QAAQC,MAChBC,KAAO,SAASC,EAAMC,EAAKC,EAAQC,GACrCC,KAAKC,IAAIJ,EAAIK,MAAMN,GAAO,SAASF,GACrB,GAAIK,EAAOI,QACVb,EAAIM,GAAQF,EACTI,EAAOJ,OACJ,CACH,IACI,IAAIU,EAAQC,KAAKC,MAAMZ,GACzB,MAAOa,GACLT,EAAOU,MAAMD,GAEjBT,EAAOM,KAGfN,EAAOU,OACNC,OAAQ,sBAGvBC,MAAQ,SAASC,EAAYC,EAAYF,GACxC,IAAIN,EAAQd,EAAIsB,GACJR,GACCM,EAAM,WAAYC,EAAY,IAAKC,EAAY,yBAA0BR,EAAO","file":"../../plugins/json.js","sourcesContent":["define([\r\n\"../modular\",\r\n'./text'\r\n], function(modules,modular) {\r\n    'use strict';\r\n\r\n\tvar map = Object.create(null);\r\n\t\r\n\treturn modular.plugins.json = {\r\n        load : function(name, req, onLoad, config) {\r\n    \t\ttext.get(req.toUrl(name), function(json) {\r\n                    if (config.isBuild) {\r\n                    \tmap[name] = json; //during build caching: http://requirejs.org/docs/plugins.html#apiwrite\r\n                        onLoad(json);\r\n                    } else {\r\n                        try {\r\n                            var _json = JSON.parse(json);\r\n                        } catch (e) {\r\n                            onLoad.error(e);\r\n                        }\r\n                        onLoad(_json);\r\n                    }\r\n                },\r\n                onLoad.error, \r\n                {accept: 'application/json'} //$NON-NLS-1$\r\n             );\r\n\t\t},\r\n\t\twrite : function(pluginName, moduleName, write) {\r\n\t\t\tvar _json = map[moduleName];\r\n            if(_json) {\r\n                write('define(\"'+ pluginName +'!'+ moduleName +'\", function(){ return '+ _json +';});\\n'); //$NON-NLS-1$ //$NON-NLS-2$ //$NON-NLS-3$\r\n            }\r\n        }\r\n\t};\r\n});"]}